<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Color Picker</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <style>
    * { box-sizing: border-box; }
    html,body { height: 100%; }
    body {
      margin: 0;
      font-family: Arial, sans-serif;
      background-color: #fff;
      padding: 20px;
      display: flex;
      flex-direction: column;
      align-items: center;
      color: #000;
    }
    #resetBtn {
      position: absolute;
      top: 16px;
      left: 16px;
      padding: 8px 12px;
      font-size: 0.95rem;
      background-color: #888;
      color: #fff;
      border: none;
      border-radius: 6px;
      cursor: pointer;
    }
    #resetBtn:hover { filter: brightness(1.05); }
    h1 {
      margin: 56px 0 18px;
      font-size: 1.6rem;
      line-height: 1;
    }
    #colorPicker {
      width: 80vw;
      height: 80vw;
      max-width: 320px;
      max-height: 320px;
      border: none;
      display: block;
      cursor: pointer;
      border-radius: 8px;
      padding: 0;
      margin: 0 auto;
    }
    .color-info {
      width: 100%;
      margin-top: 20px;
      display: grid;
      gap: 10px;
      grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
      align-items: center;
      justify-items: stretch;
    }
    .format {
      display: flex;
      align-items: center;
      gap: 10px;
      padding: 8px 10px;
      border-radius: 8px;
      justify-content: space-between;
      min-height: 44px;
      background: rgba(255,255,255,0.12);
      backdrop-filter: blur(6px);
      border: 1px solid rgba(0,0,0,0.06);
    }
    .label {
      flex: 0 0 auto;
      font-weight: 600;
      margin-right: 6px;
      white-space: nowrap;
      font-size: 0.95rem;
    }
    .value {
      flex: 1 1 auto;
      min-width: 0;
      font-size: 0.95rem;
      overflow-wrap: anywhere;
      outline: none;
      padding: 4px 6px;
      border-radius: 6px;
      background: rgba(255,255,255,0.04);
    }
    .value:focus {
      box-shadow: 0 0 0 3px rgba(0,0,0,0.06) inset;
    }
    .copy-btn {
      flex: 0 0 auto;
      padding: 8px 12px;
      font-size: 0.92rem;
      background-color: #444;
      color: #fff;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      white-space: nowrap;
    }
    .copy-btn:hover { transform: translateY(-1px); }
    @keyframes pop {
      0% { transform: scale(1); }
      50% { transform: scale(1.18); }
      100% { transform: scale(1); }
    }
    .copy-btn.copied {
      animation: pop 0.28s ease;
    }
    @media (min-width: 600px) {
      h1 { font-size: 2rem; margin-top: 68px; }
      #colorPicker { width: 300px; height: 300px; max-width: 100%; max-height: 100%; }
      .color-info { gap: 14px; grid-template-columns: repeat(3, 1fr); margin-top: 28px; }
      .format { padding: 10px 12px; min-height: 50px; }
      .label { font-size: 1.03rem; }
      .value { font-size: 1.03rem; }
      .copy-btn { padding: 6px 10px; font-size: 0.95rem; }
    }
  </style>
</head>
<body>
  <button id="resetBtn">Reset</button>
  <h1>Color Picker</h1>
  <input type="color" id="colorPicker" value="#ff0000" />

  <div class="color-info">
    <div class="format">
      <div class="label">HEX:</div>
      <div id="hexValue" class="value" contenteditable="true">#ff0000</div>
      <button class="copy-btn" onclick="copyText('hexValue', this)">Copy</button>
    </div>

    <div class="format">
      <div class="label">RGB:</div>
      <div id="rgbValue" class="value" contenteditable="true">RGB(255, 0, 0)</div>
      <button class="copy-btn" onclick="copyText('rgbValue', this)">Copy</button>
    </div>

    <div class="format">
      <div class="label">HSL:</div>
      <div id="hslValue" class="value" contenteditable="true">HSL(0, 100%, 50%)</div>
      <button class="copy-btn" onclick="copyText('hslValue', this)">Copy</button>
    </div>

    <div class="format">
      <div class="label">HSV:</div>
      <div id="hsvValue" class="value" contenteditable="true">HSV(0, 100%, 100%)</div>
      <button class="copy-btn" onclick="copyText('hsvValue', this)">Copy</button>
    </div>

    <div class="format">
      <div class="label">CMYK:</div>
      <div id="cmykValue" class="value" contenteditable="true">0%, 100%, 100%, 0%</div>
      <button class="copy-btn" onclick="copyText('cmykValue', this)">Copy</button>
    </div>
  </div>

  <script>
    const picker = document.getElementById('colorPicker');
    const spansInfo = [
      { id: 'hexValue', type: 'hex' },
      { id: 'rgbValue', type: 'rgb' },
      { id: 'hslValue', type: 'hsl' },
      { id: 'hsvValue', type: 'hsv' },
      { id: 'cmykValue', type: 'cmyk' }
    ];

    function hexToRgb(hex) {
      const r = parseInt(hex.slice(1,3),16);
      const g = parseInt(hex.slice(3,5),16);
      const b = parseInt(hex.slice(5,7),16);
      return {r,g,b};
    }

    function rgbToHex(r,g,b) {
      const to2 = n => n.toString(16).padStart(2,'0');
      return '#' + to2(r) + to2(g) + to2(b);
    }

    function rgbToHsl(r,g,b) {
      r/=255; g/=255; b/=255;
      const max = Math.max(r,g,b), min = Math.min(r,g,b);
      let h=0, s=0, l=(max+min)/2;
      if (max!==min) {
        const d = max-min;
        s = l>0.5 ? d/(2-max-min) : d/(max+min);
        switch(max){
          case r: h = (g-b)/d + (g<b?6:0); break;
          case g: h = (b-r)/d + 2; break;
          case b: h = (r-g)/d + 4; break;
        }
        h /= 6;
      }
      return { h: Math.round(h*360), s: Math.round(s*100), l: Math.round(l*100) };
    }

    function hslToRgb(h,s,l) {
      h/=360; s/=100; l/=100;
      function hue2rgb(p,q,t){
        if(t<0) t+=1;
        if(t>1) t-=1;
        if(t<1/6) return p+(q-p)*6*t;
        if(t<1/2) return q;
        if(t<2/3) return p+(q-p)*(2/3-t)*6;
        return p;
      }
      let r,g,b;
      if(s===0) r=g=b=l;
      else {
        const q = l<0.5 ? l*(1+s) : l+s-l*s;
        const p = 2*l-q;
        r = hue2rgb(p,q,h+1/3);
        g = hue2rgb(p,q,h);
        b = hue2rgb(p,q,h-1/3);
      }
      return {r: Math.round(r*255), g: Math.round(g*255), b: Math.round(b*255)};
    }

    function rgbToHsv(r,g,b) {
      r/=255; g/=255; b/=255;
      const max = Math.max(r,g,b), min = Math.min(r,g,b), d = max-min;
      let h=0;
      if(d){
        switch(max){
          case r: h = (g-b)/d + (g<b?6:0); break;
          case g: h = (b-r)/d + 2; break;
          default: h = (r-g)/d + 4;
        }
        h *= 60;
      }
      const s = max ? d/max : 0;
      return { h: Math.round(h), s: Math.round(s*100), v: Math.round(max*100) };
    }

    function hsvToRgb(h,s,v) {
      s/=100; v/=100;
      const c = v*s;
      const x = c*(1-Math.abs((h/60)%2-1));
      const m = v-c;
      let r1=0,g1=0,b1=0;
      if(h<60) [r1,g1,b1]=[c,x,0];
      else if(h<120)[r1,g1,b1]=[x,c,0];
      else if(h<180)[r1,g1,b1]=[0,c,x];
      else if(h<240)[r1,g1,b1]=[0,x,c];
      else if(h<300)[r1,g1,b1]=[x,0,c];
      else [r1,g1,b1]=[c,0,x];
      return {r: Math.round((r1+m)*255), g: Math.round((g1+m)*255), b: Math.round((b1+m)*255)};
    }

    function rgbToCmyk(r,g,b) {
      let c=1-r/255, m=1-g/255, y=1-b/255;
      const k = Math.min(c,m,y);
      if(k<1){
        c=(c-k)/(1-k);
        m=(m-k)/(1-k);
        y=(y-k)/(1-k);
      } else c=m=y=0;
      return { c: Math.round(c*100), m: Math.round(m*100), y: Math.round(y*100), k: Math.round(k*100) };
    }

    function cmykToRgb(c,m,y,k) {
      c/=100; m/=100; y/=100; k/=100;
      return {
        r: Math.round(255*(1-c)*(1-k)),
        g: Math.round(255*(1-m)*(1-k)),
        b: Math.round(255*(1-y)*(1-k))
      };
    }

    function updateAll() {
      const hex = picker.value;
      const {r,g,b} = hexToRgb(hex);
      const hsl = rgbToHsl(r,g,b);
      const hsv = rgbToHsv(r,g,b);
      const cmyk = rgbToCmyk(r,g,b);
      document.getElementById('hexValue').textContent = hex;
      document.getElementById('rgbValue').textContent = `RGB(${r}, ${g}, ${b})`;
      document.getElementById('hslValue').textContent = `HSL(${hsl.h}, ${hsl.s}%, ${hsl.l}%)`;
      document.getElementById('hsvValue').textContent = `HSV(${hsv.h}, ${hsv.s}%, ${hsv.v}%)`;
      document.getElementById('cmykValue').textContent = `${cmyk.c}%, ${cmyk.m}%, ${cmyk.y}%, ${cmyk.k}%`;
      document.body.style.backgroundColor = hex;
      const invR = 255 - r;
      const invG = 255 - g;
      const invB = 255 - b;
      const invHex = rgbToHex(invR, invG, invB);
      document.body.style.color = invHex;
      const reset = document.getElementById('resetBtn');
      reset.style.backgroundColor = invHex;
      reset.style.color = hex;
      document.querySelectorAll('.copy-btn').forEach(btn => {
        btn.style.backgroundColor = invHex;
        btn.style.color = hex;
      });
      document.querySelectorAll('.format').forEach(f => {
        f.style.borderColor = 'rgba(0,0,0,0.06)';
        f.style.background = 'rgba(255,255,255,0.06)';
      });
    }

    function copyText(id, btn) {
      const text = document.getElementById(id).textContent.trim();
      navigator.clipboard.writeText(text).then(() => {
        btn.textContent = 'Copied!';
        btn.classList.add('copied');
        setTimeout(() => {
          btn.classList.remove('copied');
          btn.textContent = 'Copy';
        }, 900);
      });
    }

    function handleEdit(e) {
      const info = spansInfo.find(s => s.id === e.target.id);
      let txt = e.target.textContent.trim().toUpperCase();
      if (info.type === 'hex') {
        let raw = txt.replace(/[^0-9A-F]/g, '');
        if (raw.length === 3) raw = raw[0]+raw[0]+raw[1]+raw[1]+raw[2]+raw[2];
        if (/^[0-9A-F]{6}$/.test(raw)) {
          picker.value = '#' + raw.toLowerCase();
          updateAll();
        }
      }
      if (info.type === 'rgb') {
        const nums = txt.match(/\d{1,3}/g) || [];
        if (nums.length === 3) {
          const [r,g,b] = nums.map(n => Math.min(255, Math.max(0, Number(n))));
          picker.value = rgbToHex(r,g,b);
          updateAll();
        }
      }
      if (info.type === 'hsl') {
        const nums = txt.match(/\d{1,3}/g) || [];
        if (nums.length === 3) {
          const [h,s,l] = nums.map((n,i) => i===0
            ? ((Number(n)%360+360)%360)
            : Math.min(100, Math.max(0, Number(n)))
          );
          const rgb = hslToRgb(h,s,l);
          picker.value = rgbToHex(rgb.r,rgb.g,rgb.b);
          updateAll();
        }
      }
      if (info.type === 'hsv') {
        const nums = txt.match(/\d{1,3}/g) || [];
        if (nums.length === 3) {
          const [h,s,v] = nums.map((n,i) => i===0
            ? ((Number(n)%360+360)%360)
            : Math.min(100, Math.max(0, Number(n)))
          );
          const rgb = hsvToRgb(h,s,v);
          picker.value = rgbToHex(rgb.r,rgb.g,rgb.b);
          updateAll();
        }
      }
      if (info.type === 'cmyk') {
        const nums = txt.match(/\d{1,3}/g) || [];
        if (nums.length === 4) {
          const [c,m,y,k] = nums.map(n => Math.min(100, Math.max(0, Number(n))));
          const rgb = cmykToRgb(c,m,y,k);
          picker.value = rgbToHex(rgb.r,rgb.g,rgb.b);
          updateAll();
        }
      }
    }

    spansInfo.forEach(({id}) => {
      const el = document.getElementById(id);
      el.addEventListener('blur', handleEdit);
      el.addEventListener('keydown', ev => {
        if (ev.key === 'Enter') {
          ev.preventDefault();
          ev.target.blur();
        }
      });
    });

    document.getElementById('resetBtn').addEventListener('click', () => {
      picker.value = '#ff0000';
      updateAll();
    });

    picker.addEventListener('input', updateAll);
    updateAll();
  </script>
</body>
</html>
